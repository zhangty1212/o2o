<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--命名空间 namespace 应该是对应接口的包名 cn.zty.o2o.dao + 接口名 ShopDao -->
<mapper namespace="cn.zty.o2o.dao.ShopDao">

	<!-- id 名字对应接口类 ShopDao 里面的方法名字 insertShop; -->
	<insert id="insertShop" useGeneratedKeys="true" keyColumn="shop_id" keyProperty="shopId">   
		insert into 
		tb_shop(owner_id,area_id,shop_category_id,shop_name,shop_desc,shop_addr,phone,shop_img,
		priority,create_time,last_edit_time,enable_status,advice)
		values
		(#{owner.userId},#{area.areaId},#{shopCategory.shopCategoryId},#{shopName},#{shopDesc},#{shopAddr},#{phone},#{shopImg},
		#{priority},#{createTime},#{lastEditTime},#{enableStatus},#{advice})
	</insert>
	
	<update id="updateShop" parameterType="cn.zty.o2o.entity.Shop">
	update tb_shop
	 <set>  
        <if test="shopName != null">  
            shop_name = #{shopName},
        </if>  
        <if test="shopDesc != null">  
            shop_desc = #{shopDesc},  
        </if>  
        <if test="shopAddr != null">  
            shop_addr = #{shopAddr}, 
        </if>  
         <if test="phone != null">  
            phone = #{phone},
        </if>  
        <if test="shopImg != null">  
            shop_img = #{shopImg},  
        </if>  
        <if test="priority != null">  
            priority = #{priority}, 
        </if>  
         <if test="advice != null">  
            advice = #{advice},
        </if>  
        <if test="lastEditTime != null">  
            last_edit_time = #{lastEditTime},  
        </if>  
        <if test="enableStatus != null">  
            enable_status = #{enableStatus},
        </if>
        <if test="shopCategory != null">  
            shop_category_id = #{shopCategory.shopCategoryId},  
        </if>  
        <if test="area != null">  
            area_id = #{area.areaId}
        </if>         
    </set>  
    where shop_id = #{shopId} 
	</update>

</mapper>